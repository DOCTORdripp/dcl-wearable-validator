import{c as d,g as h}from"./index-COrH3RzC.js";function R(i,t,s){const e=[],a=d(t),n=h(t.targetSlot);e.push(g(i,a)),e.push(p(i,n.maxMaterials)),e.push(m(i,n.maxTextures)),e.push(x(i)),e.push(f(i)),e.push(A(i)),e.push(v(i)),i.skinning&&e.push(M(i)),e.push(F(i)),e.push($(i)),e.push(S(i));const r=y(e),o=L(i,t);return{overall:r,targetSlot:t.targetSlot,appliedTriangleBudget:a,maxMaterials:n.maxMaterials,maxTextures:n.maxTextures,results:e,notes:o,fileName:s,modelStats:i}}function g(i,t){const s=i.triangleCount,e=s<=t?"PASS":"FAIL";return{id:"triangles",category:"Geometry",expected:`≤ ${t.toLocaleString()} triangles`,actual:`${s.toLocaleString()} triangles`,result:e,tip:e==="FAIL"?`Reduce triangles by ${Math.ceil((s-t)/s*100)}%`:void 0}}function p(i,t){const s=i.materialCountExclAvatarSkin,e=s<=t?"PASS":"FAIL";return{id:"materials",category:"Materials",expected:`≤ ${t} materials`,actual:`${s} materials`,result:e,tip:e==="FAIL"?`Remove ${s-t} material(s) or combine similar materials`:void 0}}function m(i,t){const s=i.usedTextureCount,e=s<=t?"PASS":"FAIL";return{id:"textures",category:"Textures/Maps",expected:`≤ ${t} textures`,actual:`${s} textures`,result:e,tip:e==="FAIL"?`Remove ${s-t} texture(s) or combine similar textures`:void 0}}function x(i){const t=i.textures.filter(e=>e.width>1024||e.height>1024),s=t.length===0?"PASS":"FAIL";return{id:"texture-sizes",category:"Textures/Maps",expected:"All textures ≤ 1024×1024",actual:t.length===0?"All textures within size limit":`${t.length} texture(s) exceed 1024×1024`,result:s,tip:s==="FAIL"?`Resize ${t.map(e=>e.name).join(", ")} to 1024×1024 or smaller`:void 0}}function f(i){const t=i.textures.filter(e=>e.width!==e.height),s=t.length===0?"PASS":"WARN";return{id:"texture-square",category:"Textures/Maps",expected:"All textures are square (recommended)",actual:t.length===0?"All textures are square":`${t.length} texture(s) are not square`,result:s,tip:s==="WARN"?`Make ${t.map(e=>e.name).join(", ")} square for better performance (optional)`:void 0}}function A(i){const t=i.hasNormalMaps?"WARN":"PASS";return{id:"normal-maps",category:"Textures/Maps",expected:"No normal maps (DCL uses toon shader)",actual:i.hasNormalMaps?"Normal maps detected":"No normal maps",result:t,tip:t==="WARN"?"Remove normal maps - DCL uses toon shader that doesn't benefit from normal maps":void 0}}function v(i){const t=i.hasMetallicRoughnessMaps?"WARN":"PASS";return{id:"metallic-roughness-maps",category:"Textures/Maps",expected:"No metallic/roughness maps (DCL uses toon shader)",actual:i.hasMetallicRoughnessMaps?"Metallic/roughness maps detected":"No metallic/roughness maps",result:t,tip:t==="WARN"?"Remove metallic/roughness maps - DCL uses toon shader that doesn't benefit from PBR maps":void 0}}function M(i){if(!i.skinning)return{id:"skin-weights",category:"Skin Weights",expected:"Valid skin weights",actual:"No skinning data",result:"PASS"};const{totalVertices:t,badWeightVertices:s}=i.skinning,e=s/t;let a,n;return e>.03?(a="FAIL",n="Fix skin weights - more than 3% of vertices have invalid weights"):e>.005?(a="WARN",n="Some vertices have invalid skin weights - check weight painting"):a="PASS",{id:"skin-weights",category:"Skin Weights",expected:"≤ 0.5% vertices with bad weights",actual:`${s}/${t} vertices (${(e*100).toFixed(2)}%)`,result:a,tip:n}}function F(i){const{width:t,height:s,depth:e}=i.bbox,a=2.42,n=2.42,r=1.4,o=t>a,u=s>n,c=e>r,l=o||u||c?"FAIL":"PASS";return{id:"dimensions",category:"Dimensions",expected:`≤ ${a}m × ${n}m × ${r}m`,actual:`${t.toFixed(2)}m × ${s.toFixed(2)}m × ${e.toFixed(2)}m`,result:l,tip:l==="FAIL"?`Scale down model to fit within ${a}m × ${n}m × ${r}m bounds`:void 0}}function $(i){const t=i.triangleCount===0,s=i.materialCountExclAvatarSkin===0,e=[];t&&e.push("No triangles found"),s&&e.push("No materials found");const a=e.length===0?"PASS":"FAIL";return{id:"file-integrity",category:"File Integrity",expected:"Valid model structure",actual:e.length===0?"Model structure is valid":e.join(", "),result:a,tip:a==="FAIL"?"Check model export - ensure it contains geometry and materials":void 0}}function S(i){const t=i.fileSizeBytes/1048576,s=3,e=1;let a,n;return t>s?(a="FAIL",n=`File size exceeds DCL limit of ${s}MB. Reduce file size by optimizing textures or simplifying geometry.`):t>e?(a="WARN",n=`File size is ${t.toFixed(2)}MB. For best performance, keep single items under ${e}MB (can be up to 2MB if thumbnail is under 1MB).`):a="PASS",{id:"file-size",category:"File Integrity",expected:`≤ ${s}MB (recommended: ≤ ${e}MB)`,actual:`${t.toFixed(2)}MB`,result:a,tip:n}}function y(i){const t=i.some(e=>e.result==="FAIL"),s=i.some(e=>e.result==="WARN");return t?"FAIL":s?"WARN":"PASS"}function L(i,t){const s=[];return t.targetSlot==="helmet"&&t.hiddenSlots.length>0&&s.push("Helmet with hidden slots: triangle budget combines hidden slot budgets."),t.targetSlot==="hands"&&t.handHidesBase&&s.push("Hand accessory hides base hand: triangle budget increased to 1.5k."),s}export{R as runValidation};
